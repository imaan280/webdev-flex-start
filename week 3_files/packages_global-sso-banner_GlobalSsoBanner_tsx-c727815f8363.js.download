"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_global-sso-banner_GlobalSsoBanner_tsx"],{31315:(e,n,t)=>{function i(e){return r(e)[0]}function r(e){let n=[];for(let t of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[i,r]=t.trim().split("=");e===i&&void 0!==r&&n.push({key:i,value:r})}return n}function l(e,n,t=null,i=!1,r="lax"){let s=document.domain;if(null==s)throw Error("Unable to get document domain");s.endsWith(".github.com")&&(s="github.com");let a="https:"===location.protocol?"; secure":"",o=t?`; expires=${t}`:"";!1===i&&(s=`.${s}`);try{document.cookie=`${e}=${n}; path=/; domain=${s}${o}${a}; samesite=${r}`}catch{}}function s(e,n=!1){let t=document.domain;if(null==t)throw Error("Unable to get document domain");t.endsWith(".github.com")&&(t="github.com");let i=new Date(Date.now()-1).toUTCString(),r="https:"===location.protocol?"; secure":"",l=`; expires=${i}`;!1===n&&(t=`.${t}`);try{document.cookie=`${e}=''; path=/; domain=${t}${l}${r}`}catch{}}t.d(n,{OR:()=>r,Ri:()=>i,TV:()=>l,Yj:()=>s})},79988:(e,n,t)=>{t.d(n,{c$:()=>i,n5:()=>r,z4:()=>l});let i="global_sso_banner",r=3,l="dismissed_sso_orgs"},51587:(e,n,t)=>{t.d(n,{N:()=>l});var i=t(79634),r=t(96540);let l=()=>{let e=(0,i.X)();return(0,r.useMemo)(()=>({ssoOrgs:e?.sso_organizations??[],baseAvatarUrl:e?.base_avatar_url??"https://avatars.githubusercontent.com"}),[e?.sso_organizations,e?.base_avatar_url])}},16070:(e,n,t)=>{t.d(n,{Y0:()=>G,$I:()=>W,kR:()=>R});var i=t(74848),r=t(21728),l=t(96540),s=t(97949),a=t(38621),o=t(13017),c=t(31315),d=t(69599),u=t(51587),m=t(11083),h=t(30459),g=t(79634);let b={bannerOuterWrapper:"GlobalSSOBanner-module__bannerOuterWrapper--fyxDF",bannerInnerWrapper:"GlobalSSOBanner-module__bannerInnerWrapper--butqf",banner:"GlobalSSOBanner-module__banner--kzCnx",dismissedOrgList:"GlobalSSOBanner-module__dismissedOrgList--Jkrx7",durationSelector:"GlobalSSOBanner-module__durationSelector--DOJjX"};function p({children:e,hidden:n}){let[t,r]=l.useState("visible"),s=l.useRef(null),a=l.useRef(void 0);return(l.useEffect(()=>{if(n&&"visible"===t){r("collapsing");let e=s.current;if(e){let n=e.getBoundingClientRect().height;a.current=n,e.style.height=`${n}px`}}else if("collapsing"===t){let e=setTimeout(()=>{r("hidden")},300);return()=>{clearTimeout(e)}}},[n,t]),"hidden"===t)?null:(0,i.jsx)("div",{ref:s,style:{height:"visible"===t?a.current??"auto":0},className:b.bannerOuterWrapper,children:(0,i.jsx)("div",{className:b.bannerInnerWrapper,style:{transform:"visible"===t?void 0:`translateY(-${a.current??0}px)`},children:e})})}try{300..displayName||(300..displayName="ANIMATION_DURATION")}catch{}try{p.displayName||(p.displayName="SlideDismiss")}catch{}var _=t(1805),f=t(15042);function y(e){let n,t,l,s=(0,r.c)(7),{ssoOrgs:a}=e;if(1===a.length){let e,n=a[0],t=n?.name;return s[0]!==t?(e=(0,i.jsxs)("p",{children:["You are dismissing single sign-on prompts for the ",t," organization on this device."]}),s[0]=t,s[1]=e):e=s[1],e}return s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("p",{children:"You are dismissing single sign-on prompts for the following organizations on this device:"}),s[2]=n):n=s[2],s[3]!==a?(t=a.map(x),s[3]=a,s[4]=t):t=s[4],s[5]!==t?(l=(0,i.jsxs)(i.Fragment,{children:[n,(0,i.jsx)("ul",{className:b.dismissedOrgList,children:t})]}),s[5]=t,s[6]=l):l=s[6],l}function x(e){return(0,i.jsx)("li",{children:e.name},e.id)}try{y.displayName||(y.displayName="DismissalSummary")}catch{}var S=t(1992),j=t(5524),O=t(46251);let v=[{id:"one-day",text:"One day",days:1},{id:"one-week",text:"One week",days:7},{id:"one-month",text:"One month",days:30},{id:"one-year",text:"One year",days:365}],N=()=>v.findIndex(e=>30===e.days);function $(e){let n,t,l,s,o,c=(0,r.c)(11),{selectedDurationIndex:d,onDurationChange:u}=e,m=v[d];c[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("span",{id:"dismissal-duration-label",children:"Remind me again in"}),c[0]=n):n=c[0];let h=m?.text||"Pick duration";return c[1]!==h?(t=(0,i.jsx)(S.W.Button,{trailingAction:a.TriangleDownIcon,"aria-labelledby":"dismissal-duration-label",children:h}),c[1]=h,c[2]=t):t=c[2],c[3]!==u||c[4]!==d?(l=v.map((e,n)=>(0,i.jsx)(j.l.Item,{role:"menuitemradio",selected:n===d,"aria-checked":n===d,onSelect:()=>u(n),children:e.text},e.id)),c[3]=u,c[4]=d,c[5]=l):l=c[5],c[6]!==l?(s=(0,i.jsx)(S.W.Overlay,{children:(0,i.jsx)(j.l,{selectionVariant:"single",role:"menu","aria-labelledby":"dismissal-duration-label",children:l})}),c[6]=l,c[7]=s):s=c[7],c[8]!==t||c[9]!==s?(o=(0,i.jsxs)(O.B,{align:"center",direction:"horizontal",className:b.durationSelector,children:[n,(0,i.jsxs)(S.W,{children:[t,s]})]}),c[8]=t,c[9]=s,c[10]=o):o=c[10],o}try{$.displayName||($.displayName="DurationMenu")}catch{}function k(e){let n,t,s,a,o,c,d,u,m,h,g=(0,r.c)(23),{isOpen:b,onClose:p,onConfirm:x,ssoOrgs:S}=e,[j,O]=l.useState(N);g[0]!==b?(n=()=>{b&&O(N())},t=[b],g[0]=b,g[1]=n,g[2]=t):(n=g[1],t=g[2]),l.useEffect(n,t),g[3]!==x||g[4]!==j?(s=()=>{let e=v[j];x(e?.days??30)},g[3]=x,g[4]=j,g[5]=s):s=g[5];let k=s;return b?(g[6]!==p?(a={buttonType:"default",content:"Cancel",onClick:p},g[6]=p,g[7]=a):a=g[7],g[8]!==k?(o={buttonType:"primary",content:"Confirm",onClick:k},g[8]=k,g[9]=o):o=g[9],g[10]!==a||g[11]!==o?(c=[a,o],g[10]=a,g[11]=o,g[12]=c):c=g[12],g[13]!==S?(d=(0,i.jsx)(y,{ssoOrgs:S}),g[13]=S,g[14]=d):d=g[14],g[15]!==j?(u=(0,i.jsx)($,{selectedDurationIndex:j,onDurationChange:O}),g[15]=j,g[16]=u):u=g[16],g[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsxs)("p",{children:["To sign into any of your SSO organizations, visit the"," ",(0,i.jsx)(_.A,{href:"/settings/organizations",inline:!0,children:"SSO settings page."})]}),g[17]=m):m=g[17],g[18]!==p||g[19]!==c||g[20]!==d||g[21]!==u?(h=(0,i.jsxs)(f.l,{title:"Dismiss SSO Banner",width:"medium",height:"auto",onClose:p,footerButtons:c,children:[d,u,m]}),g[18]=p,g[19]=c,g[20]=d,g[21]=u,g[22]=h):h=g[22],h):null}try{k.displayName||(k.displayName="ConfirmationDialog")}catch{}var C=t(21373),z=t(77430),D=t(79988);function w(e,n){let t=`/orgs/${encodeURIComponent(e)}/sso`,i=n.pathname+n.search+n.hash;return`${t}?return_to=${encodeURIComponent(i)}`}function B(e){let n,t,l,s,a,o=(0,r.c)(20),{ssoOrgs:c,redirectLocation:d}=e,{sendClickAnalyticsEvent:u}=(0,h.S)();if(0===c.length)return null;o[0]!==u?(n=()=>{u({category:D.c$,action:"click_single_sso_button",label:"sso_authentication"})},o[0]=u,o[1]=n):n=o[1];let m=n;o[2]!==u?(t=e=>{u({category:D.c$,action:"click_sso_dropdown_item",label:`org:${e}`})},o[2]=u,o[3]=t):t=o[3];let g=t;if(1===c.length){let e,n,t=c[0];return void 0===t?null:(o[4]!==t.login||o[5]!==d?(e=w(t.login,d),o[4]=t.login,o[5]=d,o[6]=e):e=o[6],o[7]!==m||o[8]!==e?(n=(0,i.jsx)(C.Q,{as:"a",href:e,onClick:m,children:"Single sign-on"}),o[7]=m,o[8]=e,o[9]=n):n=o[9],n)}if(o[10]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)(S.W.Button,{size:"small",children:"Single sign-on"}),o[10]=l):l=o[10],o[11]!==g||o[12]!==d||o[13]!==c){let e;o[15]!==g||o[16]!==d?(e=e=>(0,i.jsxs)(j.l.LinkItem,{href:w(e.login,d),onClick:()=>g(e.name),children:[e.avatar_url&&(0,i.jsx)(j.l.LeadingVisual,{children:(0,i.jsx)(z.r,{size:24,src:e.avatar_url})}),e.name]},e.login),o[15]=g,o[16]=d,o[17]=e):e=o[17],s=c.map(e),o[11]=g,o[12]=d,o[13]=c,o[14]=s}else s=o[14];return o[18]!==s?(a=(0,i.jsxs)(S.W,{children:[l,(0,i.jsx)(S.W.Overlay,{children:(0,i.jsx)(j.l,{children:s})})]}),o[18]=s,o[19]=a):a=o[19],a}try{B.displayName||(B.displayName="SSOActionMenu")}catch{}function I(){let e=(0,c.Ri)(D.z4);if(e?.value)try{let n=JSON.parse(e.value);return Array.isArray(n)?n:[]}catch(e){(0,c.Yj)(D.z4)}return[]}function T(e){return"object"==typeof e&&null!==e&&"id"in e&&"name"in e&&"login"in e}function W(e){let n,t,u,g,_,f,y,x,S,j,O,v,N,$,C,z=(0,r.c)(35),{ssoOrgs:w}=e,T=(0,o.zy)(),[W,G]=l.useState("visible"),[R,L]=l.useState(!1),U=l.useRef(!1),{sendClickAnalyticsEvent:Y}=(0,h.S)();z[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.G7)("global_sso_banner_dismiss_dialog"),z[0]=n):n=z[0];let E=n;if(z[1]!==w.length?(t=()=>{!U.current&&w.length>0&&((0,d.G7)("record_sso_banner_metrics")&&(0,m.i)({incrementKey:"GLOBAL_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),U.current=!0)},z[1]=w.length,z[2]=t):t=z[2],z[3]!==w?(u=[w],z[3]=w,z[4]=u):u=z[4],l.useEffect(t,u),0===w.length)return null;z[5]!==w?(g=e=>{G("hidden");let n=w.map(e=>e.id);(0,d.G7)("global_sso_banner_dismiss_dialog")&&(n=[...new Set([...I(),...n])].sort()),(0,c.Yj)(D.z4);let t=new Date(Date.now()+24*((void 0===e?30:e)??30)*36e5).toUTCString();(0,c.TV)(D.z4,JSON.stringify(n),t)},z[5]=w,z[6]=g):g=z[6];let F=g;z[7]!==F||z[8]!==Y?(_=()=>{Y({category:D.c$,action:"click_dismiss_button",label:"banner_dismissed"}),E?L(!0):F()},z[7]=F,z[8]=Y,z[9]=_):_=z[9];let M=_;z[10]!==F?(f=e=>{F(e),L(!1)},z[10]=F,z[11]=f):f=z[11];let J=f;z[12]!==w?(y=()=>{if(0===w.length)return"Single sign-on to see results";let e=w.slice(0,D.n5),n=w.length-D.n5,t=1===w.length?"organization":"organizations";return(0,i.jsxs)(i.Fragment,{children:["Single sign-on to see results in the ",(()=>{let t=e.map(A);if(1===t.length)return t[0];{if(2===t.length)return(0,i.jsxs)(i.Fragment,{children:[t[0]," and ",t[1]]});let e=t.length-1,r=(0,i.jsxs)(i.Fragment,{children:[t[0],", ",t[1],", and ",t[e]]});return n>0?(0,i.jsxs)(i.Fragment,{children:[r,", and ",n," more"]}):r}})()," ",t]})},z[12]=w,z[13]=y):y=z[13];let V=y,X="visible"!==W;z[14]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)(a.ShieldLockIcon,{}),z[14]=x):x=z[14],z[15]!==V?(S=V(),z[15]=V,z[16]=S):S=z[16],z[17]!==T||z[18]!==w?(j=(0,i.jsx)(B,{ssoOrgs:w,redirectLocation:T}),z[17]=T,z[18]=w,z[19]=j):j=z[19],z[20]!==M||z[21]!==S||z[22]!==j?(O=(0,i.jsx)(s.l,{title:"Single-sign on",className:b.banner,hideTitle:!0,icon:x,description:S,onDismiss:M,primaryAction:j,"data-testid":"global-sso-banner"}),z[20]=M,z[21]=S,z[22]=j,z[23]=O):O=z[23],z[24]!==O||z[25]!==X?(v=(0,i.jsx)(p,{hidden:X,children:O}),z[24]=O,z[25]=X,z[26]=v):v=z[26];let q=E&&R;return z[27]===Symbol.for("react.memo_cache_sentinel")?(N=()=>L(!1),z[27]=N):N=z[27],z[28]!==J||z[29]!==w||z[30]!==q?($=(0,i.jsx)(k,{isOpen:q,onClose:N,onConfirm:J,ssoOrgs:w}),z[28]=J,z[29]=w,z[30]=q,z[31]=$):$=z[31],z[32]!==v||z[33]!==$?(C=(0,i.jsxs)(i.Fragment,{children:[v,$]}),z[32]=v,z[33]=$,z[34]=C):C=z[34],C}function A(e){return(0,i.jsx)("strong",{children:e.name},e.login)}function G(){let e,n=(0,r.c)(2),{ssoOrgs:t,suppressBanner:s}=function(){let{ssoOrgs:e,baseAvatarUrl:n}=(0,u.N)(),{current_sso_orgs_match_dismissed_cookie:t}=(0,g.X)()??{},i=l.useMemo(()=>e.filter(T).map(e=>({...e,avatar_url:`${n}/u/${e.id}`})),[e,n]);return{suppressBanner:!0===t||function(e){let n=I();return e.length===n.length&&e.every(e=>n.includes(e.id))}(i),ssoOrgs:i,baseAvatarUrl:n}}();return 0===t.length||!(0,d.G7)("global_sso_banner")||s?null:(n[0]!==t?(e=(0,i.jsx)(W,{ssoOrgs:t}),n[0]=t,n[1]=e):e=n[1],e)}let R=D.z4;try{W.displayName||(W.displayName="GlobalSsoBanner")}catch{}try{G.displayName||(G.displayName="ContextualGlobalSsoBanner")}catch{}}}]);
//# sourceMappingURL=packages_global-sso-banner_GlobalSsoBanner_tsx-7b7d470634c0.js.map